<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DFS Traversal Animation (Multiple Graphs)</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --muted: #334155;
      --text: #e5e7eb;
      --accent: #60a5fa;
      --accent-2: #34d399;
      --edge: #64748b;
      --visited: #22d3ee;
      --active: #f472b6;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: radial-gradient(1200px 800px at 70% -10%, #1e293b 0%, var(--bg) 60%);
      color: var(--text);
      min-height: 100vh;
      display: grid;
      grid-template-rows: auto 1fr auto;
    }
    header { padding: 12px 16px; display: flex; flex-wrap: wrap; gap: 10px; border-bottom: 1px solid #1f2937; }
    h1 { font-size: 18px; margin: 0; }
    .btn { background: #0ea5e9; color: #001018; border: 0; padding: 8px 12px; border-radius: 10px; cursor: pointer; font-weight: 700; }
    .btn.stop { background: #ef4444; color: #fff; }
    .btn.secondary { background: #334155; color: #d1d5db; }
    .panel { display: grid; grid-template-columns: 300px 1fr; gap: 12px; padding: 12px; }
    .sidebar { background: rgba(17,24,39,.7); border: 1px solid #1f2937; border-radius: 12px; padding: 10px; display: grid; gap: 12px; }
    .card { background: rgba(2,6,23,.5); border: 1px solid #1f2937; border-radius: 10px; padding: 8px; }
    .stack { display: flex; flex-wrap: wrap; gap: 6px; }
    .chip { padding: 4px 8px; border-radius: 999px; background: #0b1220; border: 1px solid #1f2937; font-size: 12px; font-weight: 700; }
    .chip.active { border-color: var(--active); color: #fce7f3; }
    svg { width: 100%; height: 500px; background: #0b1220; border-radius: 12px; }
    .edge { stroke: var(--edge); stroke-width: 2; opacity: .6; }
    .edge.visited { stroke: var(--visited); stroke-width: 3; opacity: 1; }
    .node circle { fill: #ffffff; stroke: #334155; stroke-width: 2; }
    .node.visited circle { stroke: var(--visited); fill: #e0f7fa; }
    .node.active circle { stroke: var(--active); fill: #fce7f3; }
    .node.start circle { stroke: var(--accent-2); fill: #d1fae5; }
  </style>
</head>
<body>
  <header>
    <h1>DFS Traversal Animation</h1>
    <button id="startBtn" class="btn">▶ Start DFS</button>
    <button id="stopBtn" class="btn stop">■ Stop</button>
    <button id="resetBtn" class="btn secondary">↺ Reset</button>
    <label>Speed <input id="speed" type="range" min="50" max="1200" step="50" value="400"></label>
    <label>Start Node <select id="startNode"></select></label>
    <label>Graph <select id="graphSelect"></select></label>
  </header>

  <main class="panel">
    <aside class="sidebar">
      <div class="card">
        <h3>Call Stack</h3>
        <div id="stack" class="stack"></div>
      </div>
      <div class="card">
        <h3>Traversal Order</h3>
        <div id="order" class="stack"></div>
      </div>
      <div class="card">
        <h3>Event Log</h3>
        <div id="log" style="font-size:12px;max-height:160px;overflow:auto;"></div>
      </div>
    </aside>
    <section>
      <svg id="graph" viewBox="0 0 800 500"></svg>
    </section>
  </main>

  <script>
    // Multiple graph definitions
    const graphs = {
      Graph1: {
        nodes: [
          {id:'A',x:120,y:90},{id:'B',x:260,y:60},{id:'C',x:420,y:80},
          {id:'D',x:580,y:100},{id:'E',x:220,y:220},{id:'F',x:420,y:240}
        ],
        edges: [['A','B'],['B','C'],['C','D'],['A','E'],['E','F'],['C','F']]
      },
      Graph2: {
        nodes: [
          {id:'1',x:150,y:100},{id:'2',x:300,y:80},{id:'3',x:450,y:120},
          {id:'4',x:600,y:100},{id:'5',x:225,y:250},{id:'6',x:375,y:260},{id:'7',x:525,y:240}
        ],
        edges: [['1','2'],['2','3'],['3','4'],['2','5'],['3','6'],['3','7']]
      },
      Graph3: {
        nodes: [
          {id:'P',x:200,y:120},{id:'Q',x:350,y:60},{id:'R',x:500,y:120},
          {id:'S',x:275,y:240},{id:'T',x:425,y:240}
        ],
        edges: [['P','Q'],['Q','R'],['P','S'],['Q','T'],['R','T']]
      },
      Graph4: { // Star graph
        nodes: [
          {id:'X',x:400,y:200},{id:'Y',x:250,y:100},{id:'Z',x:550,y:100},
          {id:'M',x:250,y:300},{id:'N',x:550,y:300}
        ],
        edges: [['X','Y'],['X','Z'],['X','M'],['X','N']]
      },
      Graph5: { // Cycle graph
        nodes: [
          {id:'1',x:200,y:150},{id:'2',x:400,y:80},{id:'3',x:600,y:150},
          {id:'4',x:500,y:300},{id:'5',x:300,y:300}
        ],
        edges: [['1','2'],['2','3'],['3','4'],['4','5'],['5','1']]
      }
    };

    const svg = document.getElementById('graph');
    const graphSelect = document.getElementById('graphSelect');
    const startSelect = document.getElementById('startNode');
    const stackEl = document.getElementById('stack');
    const orderEl = document.getElementById('order');
    const logEl = document.getElementById('log');

    let currentGraph = 'Graph1';
    let adj = {};
    let visited, order, running, cancelled, startNode;

    Object.keys(graphs).forEach(g => {
      const opt = document.createElement('option');
      opt.value = g; opt.textContent = g;
      graphSelect.appendChild(opt);
    });
    graphSelect.value = currentGraph;

    function edgeId(u,v){ return ['e',... [u,v].sort()].join('-'); }

    function drawGraph() {
      svg.innerHTML='';
      const {nodes,edges} = graphs[currentGraph];
      adj = Object.fromEntries(nodes.map(n=>[n.id,[]]));
      for(const [u,v] of edges){ adj[u].push(v); adj[v].push(u);} for(const k in adj) adj[k].sort();

      for(const [u,v] of edges){
        const U=nodes.find(n=>n.id===u),V=nodes.find(n=>n.id===v);
        const line=document.createElementNS('http://www.w3.org/2000/svg','line');
        line.setAttribute('x1',U.x);line.setAttribute('y1',U.y);
        line.setAttribute('x2',V.x);line.setAttribute('y2',V.y);
        line.classList.add('edge'); line.id=edgeId(u,v);
        svg.appendChild(line);
      }

      startSelect.innerHTML='';
      for(const n of nodes){
        const g=document.createElementNS('http://www.w3.org/2000/svg','g');
        g.classList.add('node'); g.setAttribute('data-id',n.id);
        const c=document.createElementNS('http://www.w3.org/2000/svg','circle');
        c.setAttribute('cx',n.x);c.setAttribute('cy',n.y);c.setAttribute('r',20);
        const t=document.createElementNS('http://www.w3.org/2000/svg','text');
        t.setAttribute('x',n.x);t.setAttribute('y',n.y+4);
        t.setAttribute('text-anchor','middle');t.textContent=n.id;
        g.appendChild(c);g.appendChild(t);svg.appendChild(g);
        const opt=document.createElement('option');opt.value=n.id;opt.textContent=n.id;startSelect.appendChild(opt);
        g.addEventListener('click',()=>{if(!running){startNode=n.id;setStartHighlight();}});
      }
      startNode=nodes[0].id; startSelect.value=startNode; setStartHighlight();
    }

    function setStartHighlight(){ document.querySelectorAll('.node').forEach(el=>el.classList.remove('start'));
      const el=[...document.querySelectorAll('.node')].find(n=>n.getAttribute('data-id')===startNode);
      if(el) el.classList.add('start'); }

    function resetAll(){ running=false;cancelled=false;visited=new Set();order=[];
      document.querySelectorAll('.node').forEach(el=>el.classList.remove('visited','active'));
      document.querySelectorAll('.edge').forEach(el=>el.classList.remove('visited'));
      stackEl.innerHTML=''; orderEl.innerHTML=''; logEl.innerHTML=''; setStartHighlight(); }

    function sleep(ms){ return new Promise(res=>setTimeout(res,ms)); }
    function pushLog(msg){ logEl.innerHTML+=`<div>${msg}</div>`; logEl.scrollTop=logEl.scrollHeight; }
    function renderStack(stack){ stackEl.innerHTML=''; stack.forEach((id,i)=>{const chip=document.createElement('div');chip.className='chip'+(i===stack.length-1?' active':'');chip.textContent=id;stackEl.appendChild(chip);}); }
    function renderOrder(){ orderEl.innerHTML=''; order.forEach(id=>{const chip=document.createElement('div');chip.className='chip';chip.textContent=id;orderEl.appendChild(chip);}); }

    function highlightNode(id,cls,on=true){ const el=[...document.querySelectorAll('.node')].find(n=>n.getAttribute('data-id')===id); if(el) el.classList.toggle(cls,on); }
    function highlightEdge(u,v){ const e=document.getElementById(edgeId(u,v)); if(e) e.classList.add('visited'); }

    document.getElementById('resetBtn').onclick=resetAll;
    document.getElementById('stopBtn').onclick=()=>{cancelled=true;running=false;pushLog('Stopped.')};
    graphSelect.onchange=(e)=>{currentGraph=e.target.value;drawGraph();resetAll();};
    startSelect.onchange=(e)=>{if(!running){startNode=e.target.value;setStartHighlight();}};

    document.getElementById('startBtn').onclick=async()=>{
      if(running) return; resetAll(); running=true;cancelled=false; pushLog(`Starting DFS from ${startNode}`);
      const delay=()=>Number(document.getElementById('speed').value);
      const stack=[];
      async function dfs(u){ if(cancelled) return; stack.push(u); renderStack(stack); highlightNode(u,'active',true); await sleep(delay());
        if(!visited.has(u)){ visited.add(u); order.push(u); renderOrder(); highlightNode(u,'visited'); pushLog(`Visit ${u}`); await sleep(delay());
          for(const v of adj[u]){ if(cancelled) return; highlightEdge(u,v); await sleep(Math.max(100,delay()*0.8)); if(!visited.has(v)){ await dfs(v); if(cancelled) return; }} }
        highlightNode(u,'active',false); stack.pop(); renderStack(stack); }
      await dfs(startNode); running=false; if(!cancelled) pushLog('DFS complete.');
    };

    drawGraph(); resetAll();
  </script>
</body>
</html>
